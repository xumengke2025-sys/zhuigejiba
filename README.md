# 🗺️ 追迹 (Trace) - 你的小说“地图导航”

读玄幻/仙侠小说时，是不是经常被复杂的地图绕晕？
*“主角从青云门出发，向东三百里到了流波山，又下海去了空桑山……”* 
脑子里的地图是不是已经乱成一团麻了？

**“追迹”** 就是为了解决这个问题诞生的！你只需要把小说文件投喂给它，它就会自动帮你把文字变成一张**可交互的复古地图**。

---

### ✨ 它能做什么？

1.  **自动绘制地图** 🎨
    *   上传 TXT 小说，AI 会自动分析里面出现的所有地点（国家、城市、门派、山川）。
    *   它甚至能分清“层级”：比如“皇宫”是在“京城”里面的，而“养心殿”又是在“皇宫”里面的。
    *   生成的地图是**羊皮纸风格**的，代入感满满！

2.  **室内/室外无缝切换** 🔍
    *   在大地图上看到“皇宫”？点它！
    *   地图会瞬间“下钻”，展示皇宫内部的详细布局（大殿、偏殿、御花园、走廊……）。
    *   不再只是一个干巴巴的点，而是一个立体的世界。

3.  **追踪人物足迹** 👣
    *   想知道主角这一路都去过哪？
    *   在左侧选这一张角色，地图上就会高亮显示他的**行动路线**。
    *   走到哪，哪里发生了什么事，一目了然。

4.  **沉浸式剧情回顾** 📜
    *   点击地图上的地点或事件点，右侧会展开一个**卷轴**。
    *   里面记录了这里发生的具体剧情摘要，配合古风界面，像在读原著一样。

---

### 🚀 怎么用？（超简单版）

只要三步，就可以在你的电脑上跑起来！

#### 1. 准备工作
确保你的电脑上安装了基础工具：
*   **Python** (建议 3.10 或以上)
*   **Node.js**

#### 2. 一键安装
下载本项目后，在文件夹里打开终端（CMD 或 PowerShell），输入这一行命令并回车：

```bash
npm run setup
```

系统会自动帮你把所有需要的东西都装好。

#### 3. 填入“钥匙” (API Key)
本项目基于大模型（AI）运行，所以需要一个 API Key。
1.  在文件夹里找到 `.env.example` 文件。
2.  把它重命名为 `.env`。
3.  用记事本打开，填入你的 API Key（推荐使用 DeepSeek-V3 模型，便宜又聪明）：

```ini
LLM_API_KEY=sk-xxxxxxxxxxxxxx
LLM_BASE_URL=https://api.deepseek.com
LLM_MODEL_NAME=deepseek-chat
```

#### 4. 启动！
在终端输入：

```bash
npm run dev
```

看到 `Local: http://localhost:xxxx` 字样后，用浏览器打开那个地址，就开始你的追迹之旅吧！

---

### ❓ 常见问题

*   **Q: 分析一本小说要多久？**
    *   A: 取决于小说长度。通常几百万字的小说可能需要几分钟到十几分钟。你可以先去喝杯茶。
*   **Q: 支持什么格式？**
    *   A: 目前仅支持 **TXT** 纯文本格式。
*   **Q: 为什么有些地点没连起来？**
    *   A: AI 是根据原文描述推断位置的。如果作者没写“从A到了B”，AI 也不敢乱连线哦。

---

### 🛠️ 技术栈（给程序员看的）
*   **Backend**: Python, Flask, OpenAI SDK (LLM)
*   **Frontend**: Vue 3, D3.js (Map Rendering), Vite
*   **Design**: 羊皮纸复古 UI (CSS3 + SVG Filters)
